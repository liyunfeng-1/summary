# HTTP组成

每条HTTP报文都包含一个来自客户端的请求，或者一条来自服务器的响应。HTTP报文分两类：请求报文和响应报文。不管是请求报文还是响应报文每条HTTP报文是由3部分组成，分别是：**1、起始行 2、首部 3、主体**



**一、起始行**

**请求行和响应行**

**请求行：**请求报文请求服务器对资源进行一些操作。通俗讲就是客户端想服务器发起请求的请求命令。包含了

方法：如：get、post等

请求URL：如：/src/test.pdf

版本号：版本号是指HTTP/1.1或HTTP/2.0等



![img](https://pic2.zhimg.com/80/v2-c0382b0bbf8cc4bdb4a3e84588adb231_720w.jpg)



**响应行：**响应报文承载了状态信息和操作产生的所有结果数据，将其返回给客户端。包含了响应报文使用的HTTP版本，状态码（如：200、404等），以及描述操作状态的文本形式的原因短语。

![img](https://pic3.zhimg.com/80/v2-5f1fc1357a2b103dffb9978c04089a62_720w.jpg)



**版本号：**版本号是指HTTP/1.1或HTTP/2.0等

状态码大致分5类：

1-199：信息提示。请求已被接受，需要进一步处理。

200-299：成功。请求已被接受，处理。

300-399：重定向。最常见的重定向就是304，本地已缓存返回内容，所以浏览器直接从本地取内容而不是从服务器重新拉去。

400-499：客户端错误。最常见的是404，服务器没有找到内容，说明你请求的url不对，服务器上并没有对应的内容。

500-599：服务器错误。代表服务器在处理请求过程中有错误或异常状态发生。

常见的请求状态码：

200：请求已成功，请求所需要的请求头和相应数据随此请求返回。202：服务器已接受请求，但是尚未处理。301：永久移动

302：临时移动

304：get请求，且该请求已被允许，但是所请求的内容和上次请求的内容并没有发生改变，服务器返回该状态码，浏览器抓取已上次请求的已缓存的文件。

400：由于包含语法错误，该请求不能被服务器理解。

401：当前请求需要用户认证，该响应必须包含一个适用于被请求资源的WWW-Authenticate信息头用以询问用户信息。

403：服务器已经理解请求，但是拒绝了它。

404：请求失败，请求所需要的资源在服务器上并为被发现。

500：服务器遇到了一个未曾预料的情况。

503：由于临时的服务器维护或过载，服务器当前无法处理请求。



**短语：**它为状态码提供了文本形式的解释（比如：HTTP/1.0 200 OK ,OK就是原因短语）



**二、首部**

首部分类：**通用首部**（既可以出现在请求报文中，也可以出现在响应报文中）、**请求首部**、**响应首部**、**实体首部**（描述主题的长度和内容，或者资源本身）、**扩展首部**

在这里简单列一些常见的首部

**通用首部**

cache-control：用于传输对象的缓存信息。

Date: 用来给出报文创建的日期和时间。



**请求首部：**

Accept：客户端用Accept首部来通知服务器可以接受哪些媒体类型。例如：Accept: text/*, image/*、Accept: text/*, image/gif, image/jpeg; q=1等

Accept-Charset:用来通知服务器它可以接受哪些字符集或哪些是优选字符集。例如：Accept-Charset: iso-latin-1

Accept-Encoding:客户端用来告知服务器它可以接受哪些编码方式。

Accept-language：用来告诉服务器可接受或优选接受哪些语言。

Authorization：客户端用来向服务器回应自己的身体的验证信息。

From：用来说明请求来自何方。

If-Modified-since：用来发起条件请求。

If-Match

If-None-Match



**响应首部：**

Age：告诉接受端响应已产生了多长时间。

Allow：用于通知客户端可以对特定资源使用哪些HTTP方法。例如：Allow: GET, HEAD

实体首部：

Content-Encoding：用于说明是否对某对象进行过编码。

Content-Language：用来告诉对方，想要理解对象的客户端，应该理解哪种自然语言。

Content-Length：用来说明实体主体部分的长度和尺寸。

Content-Type：用来说明报文中对象的媒体类型。例如：Content-Type: text/html; charset=iso-latin-1

ETag：为报文中包含的实体提供了实体标记。实体标记实际上就是一种标识资源的方式。

Expiress：给出了响应失效的日期和时间。这样，像浏览器这样的客户端就可以缓存一份副本，在这个时间到期之前，不用去询问服务器它是否失效。

Last-Modified

常用的首部大概就这么多，还有好多没有列出来的，请大家自行查找。Expiress、cache-control、Age、ETag、If-None-Math、Last-Modified、If-Modified-since这些是和缓存相关的一些首部，并没有过多的解释，因为我们公众号的上一篇文章有讲到缓存，如果大家感兴趣可以看一下上一篇文章，再次附一张从网络上找到的一个很好解释缓存的一张图片。



![img](https://pic3.zhimg.com/80/v2-5ade6a4af915f2527fb7413ff483df46_720w.jpg)







**三、实体**

实体就是HTTP要传输的内容。